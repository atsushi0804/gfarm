FROM almalinux:8

RUN dnf update \
 && dnf -y upgrade \
 && dnf -y install git wget rpm-build sudo passwd \
 && dnf -y install gcc make \
 && dnf -y install openssl-devel postgresql-devel \
 && dnf -y install rdma-core-devel \
 && dnf -y install postgresql postgresql-server \
 && dnf -y install python3 ruby \
 && dnf -y install epel-release \
 && dnf -y install globus-gssapi-gsi-devel \
 && dnf -y install python3-docopt python3-schema python3-tqdm \
 && dnf -y install fuse fuse-devel libacl-devel \
 && dnf -y install libtool cyrus-sasl-devel scitokens-cpp-devel \
 && dnf -y install procps

ADD . /root/gfarm

CMD ["/sbin/init"]
